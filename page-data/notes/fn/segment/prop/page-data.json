{"componentChunkName":"component---src-templates-entry-js","path":"/notes/fn/segment/prop","result":{"data":{"markdownRemark":{"frontmatter":{"title":"Propensity Modeling"},"html":"<h3>Defining Targeting Models</h3>\n<ul>\n<li>\n<p>Customer targeting typically involves three models:</p>\n<ul>\n<li>Propensity model</li>\n<li>Time-to-event model</li>\n<li>Lifetime value model</li>\n</ul>\n</li>\n<li>These models can be used individually or together</li>\n<li>A propensity model estimates the probability of a customer doing some event</li>\n<li>A time-to-event model estimates the number of days until a customer does some event</li>\n<li>A lifetime value model estimates the value of a customer</li>\n<li>\n<p>The events in a propensity or time-to-event model include:</p>\n<ul>\n<li>A candidate responding to an email campaign</li>\n<li>A customer puchasing a specific product</li>\n<li>A customer expanding to a new product</li>\n<li>A customer purchasing additional units of a prduct</li>\n<li>A customer changing shopping habits</li>\n<li>A customer churning</li>\n</ul>\n</li>\n<li>All three of these models can help determine the impact of this event</li>\n</ul>\n<h3>Defining Look-Alike Modeling</h3>\n<ul>\n<li>A look-alike model is one of the main components of a propensity model</li>\n<li>A look-alike model assumes propensity is only the probability of a customer moving from one point on the life-cycle curve to another</li>\n<li>\n<p>A look-alike model consists of the following components:</p>\n<ul>\n<li>\n<p>A response variable</p>\n<ul>\n<li>E.g. did the customer purchase this product for the first time</li>\n<li>E.g. did the customer churn</li>\n<li>etc.</li>\n</ul>\n</li>\n<li>\n<p>Customer profile predictors</p>\n<ul>\n<li>E.g. income</li>\n<li>E.g. gender</li>\n<li>etc.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3>Describing a Look-Alike Model</h3>\n<ul>\n<li>As a result, a look-alike model estimates the propensity of a customer using profiles of consumers who exhibited similar behavior in the past</li>\n<li>For example, let's say we're training a model to predict the propensity of buying a product for the first time</li>\n<li>Then, we can also train the model using profiles of customers who stopped buying a product for a while and then started buying it again</li>\n<li>\n<p>The following are examples of predictors within a customer profile:</p>\n<ul>\n<li>Household income</li>\n<li>Household size</li>\n<li>Behaviorial attributes</li>\n<li>Email opens</li>\n<li>Clicks</li>\n<li>Gender</li>\n<li>etc.</li>\n</ul>\n</li>\n</ul>\n<h3>Preparing a Look-Alike Model</h3>\n<ol>\n<li>\n<p>Ensure each row represents a single customer consisting of:</p>\n<ul>\n<li>Some customer profile features</li>\n<li>A timestamp</li>\n</ul>\n</li>\n<li>\n<p>Organize each row into one of three sequential time frames:</p>\n<ul>\n<li>An observational period</li>\n<li>An optional buffer</li>\n<li>An outcome period</li>\n</ul>\n</li>\n<li>\n<p>Generate a response variable representing the desired event: </p>\n<ul>\n<li>The observation period is used to generate features</li>\n<li>The outcome period is used to generate the response variable</li>\n<li>These two intervals may or may not be separated by a buffer</li>\n</ul>\n</li>\n</ol>\n<p><img src=\"/2802b6a72677dfc808595ae6dba42bfd/customerpropensity.svg\" alt=\"customerpropensity\"></p>\n<h3>Describing an Optional Buffer</h3>\n<ul>\n<li>The observational and outcome periods may or may not be separated by a buffer</li>\n<li>The buffer can be used to predict events in the relatively distant future</li>\n<li>It is not used for predicting immediate events</li>\n<li>For example, a model that predicts customer churn should probably be trained with the outcome intervals shifted into the future</li>\n<li>In other words, there should be a buffer included</li>\n<li>Since, it would be impractical to predict customers who are likely to churn immediately</li>\n<li>Because, it gives no time to perform any mitigating marketing action</li>\n</ul>\n<h3>Illustrating a Look-Alike Model</h3>\n<ul>\n<li>As an example, suppose we're modeling a propensity to try a new product</li>\n<li>The training set only should include customers who did not buy the product during the observation period</li>\n<li>The same rule is applied for model evaluation</li>\n<li>Implying, a customer who already buys a promoted product is immediately excluded as a non-fit</li>\n<li>Now, suppose our targeting goal is to identify customers with a high propensity to try a dessert</li>\n<li>\n<p>Let's assume that a targeting system generated a training data set with:</p>\n<ul>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>12</mn></mrow><annotation encoding=\"application/x-tex\">12</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">2</span></span></span></span> historical customers profiles</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>5</mn></mrow><annotation encoding=\"application/x-tex\">5</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">5</span></span></span></span> features</li>\n<li><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>1</mn></mrow><annotation encoding=\"application/x-tex\">1</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">1</span></span></span></span> response representing whether the customer started buying a dessert</li>\n</ul>\n</li>\n<li>\n<p>Specifically, the features represent:</p>\n<ul>\n<li><code class=\"language-text\">Bakery Total:</code> The total spending in the bakery during the observation period</li>\n<li><code class=\"language-text\">Dairy Total:</code> The total spending on dairy during the observation period</li>\n<li><code class=\"language-text\">Bakery Weekend:</code> The total spending in the bakery on the weekends during the observation period</li>\n<li><code class=\"language-text\">Dairy Weekend:</code> The total spending on dairy on the weekends during the observation period</li>\n<li><code class=\"language-text\">Credit:</code> Represents either credit or cash</li>\n</ul>\n</li>\n<li>The following table includes sample data trained on our model:</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>ID</th>\n<th>Bakery Total</th>\n<th>Bakery Weekend</th>\n<th>Dairy Total</th>\n<th>Dairy Weekend</th>\n<th>Credit</th>\n<th>Response</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>1</td>\n<td>150</td>\n<td>10</td>\n<td>150</td>\n<td>140</td>\n<td>1</td>\n<td>1</td>\n</tr>\n<tr>\n<td>2</td>\n<td>210</td>\n<td>20</td>\n<td>120</td>\n<td>110</td>\n<td>1</td>\n<td>0</td>\n</tr>\n<tr>\n<td>3</td>\n<td>190</td>\n<td>190</td>\n<td>210</td>\n<td>20</td>\n<td>1</td>\n<td>1</td>\n</tr>\n<tr>\n<td>4</td>\n<td>270</td>\n<td>250</td>\n<td>190</td>\n<td>0</td>\n<td>1</td>\n<td>1</td>\n</tr>\n<tr>\n<td>5</td>\n<td>180</td>\n<td>180</td>\n<td>190</td>\n<td>10</td>\n<td>1</td>\n<td>1</td>\n</tr>\n<tr>\n<td>6</td>\n<td>260</td>\n<td>250</td>\n<td>230</td>\n<td>20</td>\n<td>0</td>\n<td>1</td>\n</tr>\n<tr>\n<td>7</td>\n<td>270</td>\n<td>30</td>\n<td>210</td>\n<td>210</td>\n<td>1</td>\n<td>0</td>\n</tr>\n<tr>\n<td>8</td>\n<td>150</td>\n<td>40</td>\n<td>150</td>\n<td>50</td>\n<td>1</td>\n<td>0</td>\n</tr>\n<tr>\n<td>9</td>\n<td>90</td>\n<td>70</td>\n<td>120</td>\n<td>100</td>\n<td>0</td>\n<td>0</td>\n</tr>\n<tr>\n<td>10</td>\n<td>30</td>\n<td>0</td>\n<td>200</td>\n<td>200</td>\n<td>1</td>\n<td>0</td>\n</tr>\n<tr>\n<td>11</td>\n<td>190</td>\n<td>190</td>\n<td>250</td>\n<td>10</td>\n<td>1</td>\n<td>1</td>\n</tr>\n<tr>\n<td>12</td>\n<td>10</td>\n<td>0</td>\n<td>30</td>\n<td>0</td>\n<td>1</td>\n<td>0</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>For this example, we'll build our model using logistic regression</li>\n<li>The following table includes sample parameters for our model:</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>Parameters</th>\n<th>Estimate</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Bakery Total</td>\n<td>0.0012</td>\n</tr>\n<tr>\n<td>Bakery Weekend</td>\n<td>0.0199</td>\n</tr>\n<tr>\n<td>Dairy Total</td>\n<td>-0.0043</td>\n</tr>\n<tr>\n<td>Dairy Weekend</td>\n<td>–0.0089</td>\n</tr>\n<tr>\n<td>Credit</td>\n<td>–0.4015</td>\n</tr>\n</tbody>\n</table>\n<ul>\n<li>The following table includes the final propensity scores for <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>5</mn></mrow><annotation encoding=\"application/x-tex\">5</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">5</span></span></span></span> customers in our test set:</li>\n</ul>\n<table>\n<thead>\n<tr>\n<th>Bakery Total</th>\n<th>Bakery Weekend</th>\n<th>Dairy Total</th>\n<th>Dairy Weekend</th>\n<th>Credit</th>\n<th>Propensity</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>10</td>\n<td>0</td>\n<td>50</td>\n<td>50</td>\n<td>1</td>\n<td>0.26</td>\n</tr>\n<tr>\n<td>20</td>\n<td>20</td>\n<td>200</td>\n<td>200</td>\n<td>1</td>\n<td>0.07</td>\n</tr>\n<tr>\n<td>150</td>\n<td>20</td>\n<td>100</td>\n<td>30</td>\n<td>1</td>\n<td>0.37</td>\n</tr>\n<tr>\n<td>250</td>\n<td>20</td>\n<td>190</td>\n<td>30</td>\n<td>1</td>\n<td>0.31</td>\n</tr>\n<tr>\n<td>250</td>\n<td>200</td>\n<td>190</td>\n<td>30</td>\n<td>1</td>\n<td>0.94</td>\n</tr>\n<tr>\n<td>250</td>\n<td>200</td>\n<td>190</td>\n<td>30</td>\n<td>0</td>\n<td>0.96</td>\n</tr>\n</tbody>\n</table>\n<h3>Motivating Response Modeling</h3>\n<ul>\n<li>A response model is a slight variation of the look-alike model</li>\n<li>Specifically, a response model is a propensity model measuring the impact of a campagin</li>\n<li>\n<p>Creating a basic look-alike model will give us a basic propensity model</p>\n<ul>\n<li>On its own, this model estimates the unconditional probability of a certain response <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>P</mi><mo stretchy=\"false\">(</mo><mtext>R</mtext><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">P(\\text{R})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mopen\">(</span><span class=\"mord text\"><span class=\"mord\">R</span></span><span class=\"mclose\">)</span></span></span></span></li>\n</ul>\n</li>\n<li>\n<p>Including a treatment feature provides a more well-defined propensity model focused on measuring the effects of campaigns</p>\n<ul>\n<li>Then, this model estimates the conditional probability of the response (or action) given a pilot campaign <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>P</mi><mo stretchy=\"false\">(</mo><mtext>R</mtext><mi mathvariant=\"normal\">∣</mi><mtext>T</mtext><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">P(\\text{R} | \\text{T})</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mopen\">(</span><span class=\"mord text\"><span class=\"mord\">R</span></span><span class=\"mord\">∣</span><span class=\"mord text\"><span class=\"mord\">T</span></span><span class=\"mclose\">)</span></span></span></span></li>\n</ul>\n</li>\n<li>\n<p>The following are some examples of treatments:</p>\n<ul>\n<li>Running a campaign</li>\n<li>Sending targeted emails</li>\n<li>Etc.</li>\n</ul>\n</li>\n<li>Meaning, we can measure the propensity of an event (e.g. churn) after some campaign or marketing action</li>\n<li>This is done to measure the impact of a campaign before execution</li>\n</ul>\n<h3>Describing Response Modeling</h3>\n<ul>\n<li>\n<p>Response modeling usually conducts a pilot campaign</p>\n<ul>\n<li>A pilot campaign tends to split the campaign group into treated responders and treated non-responders</li>\n</ul>\n</li>\n<li>\n<p>Specifically, response modeling includes the following steps:</p>\n<ul>\n<li>Distributing a promotion initially to a small group of recipients</li>\n<li>Collecting the responses</li>\n<li>Creating a classification model that maximizes the difference between treated responders and treated non-responder</li>\n<li>Calculate the difference between the control group and test group (i.e. uplift)</li>\n</ul>\n</li>\n<li>This corresponds to a look-alike model trained on a population of treated profiles by using\nthe response indicator as a training label</li>\n<li>This model can be used to execute a full-blown campaign</li>\n<li>Specificially, it can target customers with a high propensity to respond when given the treatment</li>\n<li>In certain cases, the model can be created by using historical data for similar campaigns\nwithout running a pilot</li>\n</ul>\n<h3>Defining a Disadvantage of Response Modeling</h3>\n<ul>\n<li>So far, response modeling can target customers who are likely to take an action anyway, even without the treatment</li>\n<li>\n<p>For example, suppose some customers in the control group were planning on purchasing a product, even before the campaign was run</p>\n<ul>\n<li>Then, the campaign would look more effective than it actually is</li>\n<li>And, the control group could likely outperform the test group</li>\n</ul>\n</li>\n<li>\n<p>Thus, basic propensity modeling only accounts for treated customers</p>\n<ul>\n<li>It discards the information about the non-treated ones</li>\n</ul>\n</li>\n</ul>\n<h3>Solving the Problem with Response Modeling</h3>\n<ul>\n<li>A control group will solve the uplift issue in the pilot campaign</li>\n<li>This group includes randomly selected profiles of targeted and non-targeted customers</li>\n<li>\n<p>As a result, we should observe four distinguishable groups:</p>\n<ul>\n<li><code class=\"language-text\">Treatment responder:</code> a participant who receives the experimental treatment, whose effect is being studied</li>\n<li><code class=\"language-text\">Treatment non-responder:</code> a participant who receives the experimental treatment, whose effect isn't being studied</li>\n<li><code class=\"language-text\">Control responder:</code> a participant who didn't receive the experimental treatment, whose effect is being studied</li>\n<li><code class=\"language-text\">Control non-responder:</code> a participant who didn't receive the experimental treatment, whose effect isn't being studied</li>\n</ul>\n</li>\n<li>Now, we can accurately measure the uplift by finding the difference between the response rates in the test and control groups</li>\n<li>Specifically, the uplift becomes <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mtext>TR</mtext><mo>−</mo><mtext>CR</mtext></mrow><annotation encoding=\"application/x-tex\">\\text{TR} - \\text{CR}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.76666em;vertical-align:-0.08333em;\"></span><span class=\"mord text\"><span class=\"mord\">TR</span></span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span><span class=\"mbin\">−</span><span class=\"mspace\" style=\"margin-right:0.2222222222222222em;\"></span></span><span class=\"base\"><span class=\"strut\" style=\"height:0.68333em;vertical-align:0em;\"></span><span class=\"mord text\"><span class=\"mord\">CR</span></span></span></span></span></li>\n<li>\n<p>These two probabilities <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>P</mi><mo stretchy=\"false\">(</mo><mi>T</mi><mi>R</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">P(TR)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">T</span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mclose\">)</span></span></span></span> and <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>P</mi><mo stretchy=\"false\">(</mo><mi>C</mi><mi>R</mi><mo stretchy=\"false\">)</mo></mrow><annotation encoding=\"application/x-tex\">P(CR)</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:1em;vertical-align:-0.25em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.13889em;\">P</span><span class=\"mopen\">(</span><span class=\"mord mathnormal\" style=\"margin-right:0.07153em;\">C</span><span class=\"mord mathnormal\" style=\"margin-right:0.00773em;\">R</span><span class=\"mclose\">)</span></span></span></span> can be estimated either:</p>\n<ul>\n<li>Using one classification model trained on a union of test and control profiles with a treatment indicated included as a feature</li>\n<li>Using two separate classification models trained on the test and control groups</li>\n</ul>\n</li>\n<li>For more information about model design, refer to pages <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>106</mn><mi>a</mi><mi>n</mi><mi>d</mi></mrow><annotation encoding=\"application/x-tex\">106 and</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.69444em;vertical-align:0em;\"></span><span class=\"mord\">1</span><span class=\"mord\">0</span><span class=\"mord\">6</span><span class=\"mord mathnormal\">a</span><span class=\"mord mathnormal\">n</span><span class=\"mord mathnormal\">d</span></span></span></span>107$ of <em>Introduction to Algorithmic Marketing</em></li>\n</ul>\n<p><img src=\"/0b1389169072f9d3825596dc9e15f949/customerresponse.svg\" alt=\"customerresponse\"></p>\n<h3>Describing Notation for Experiments</h3>\n<ul>\n<li>As a reminder, a <em>target group</em> refers to the type of people targeted for an experiment</li>\n<li>\n<p>Our experiment will only capture a sample of the entire target group</p>\n<ul>\n<li>Here, our target group represents a population</li>\n</ul>\n</li>\n<li>\n<p>Any experiment includes a control group and a treatment group</p>\n<ul>\n<li>Sometimes, a control group is called a placebo group</li>\n<li>Sometimes, a treatment group is called an experimental group</li>\n</ul>\n</li>\n<li>A <em>control group</em> refers to the people in an experiment who don't receive a treatment</li>\n<li>A <em>treatment group</em> refers to the people in an experiment who do receive a treatment</li>\n</ul>\n<h3>References</h3>\n<ul>\n<li><a href=\"https://algorithmicweb.files.wordpress.com/2018/07/algorithmic-marketing-ai-for-marketing-operations-r1-7g.pdf\" target=\"_blank\" rel=\"nofollow\">Textbook about Algorithmic Marketing</a></li>\n</ul>"}},"pageContext":{"slug":"fn/segment/prop","previousSlug":"fn/segment/cluster","nextSlug":"fn/segment/behavior","previousTitle":"Clustering","nextTitle":"Behavioral Segmentation"}},"staticQueryHashes":[]}