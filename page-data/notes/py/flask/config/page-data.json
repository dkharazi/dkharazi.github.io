{"componentChunkName":"component---src-templates-entry-js","path":"/notes/py/flask/config","result":{"data":{"markdownRemark":{"frontmatter":{"title":"Configuration"},"html":"<h3>Describing Configuration Handling</h3>\n<ul>\n<li>Applications need some kind of configuration</li>\n<li>There are different settings depending on the application environment</li>\n<li>\n<p>These settings include:</p>\n<ul>\n<li>Toggling the debug mode</li>\n<li>Setting the secret key</li>\n<li>Setting environment-specific things</li>\n</ul>\n</li>\n<li>Flask sets configuration values in the <code class=\"language-text\">config</code> attribute</li>\n<li>Specifically, there is a <code class=\"language-text\">config</code> attribute for every <code class=\"language-text\">Flask</code> object</li>\n<li>This is where we can set our own configurations</li>\n</ul>\n<h3>Basics of Configuration</h3>\n<ul>\n<li>The <code class=\"language-text\">config</code> is a subclass of a dictionary</li>\n<li>Implying, it can be modified like any dictionary</li>\n<li>The following is an example of this behavior:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> app <span class=\"token operator\">=</span> Flask<span class=\"token punctuation\">(</span>__name__<span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> app<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">[</span><span class=\"token string\">'TESTING'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span></code></pre></div>\n<ul>\n<li>Some configuration values are forwarded to the <code class=\"language-text\">Flask</code> object</li>\n<li>This is so we can read and write from the object</li>\n<li>The following is an example:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> app<span class=\"token punctuation\">.</span>testing <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span></code></pre></div>\n<ul>\n<li>The <code class=\"language-text\">update</code> method updates multiple keys at once:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> app<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>update<span class=\"token punctuation\">(</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>     TESTING<span class=\"token operator\">=</span><span class=\"token boolean\">True</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>     SECRET_KEY<span class=\"token operator\">=</span><span class=\"token string\">b'_5#y2L\"F4Q8z\\n\\xec]/'</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">)</span></code></pre></div>\n<h3>Configuration Best Practices</h3>\n<ul>\n<li>Create an application in a function</li>\n<li>\n<p>Register blueprints to the application</p>\n<ul>\n<li>This allows us to create multiple instance of our application with different configurations</li>\n<li>This makes unit testing much easier</li>\n</ul>\n</li>\n<li>Never write code that needs configuration at import time</li>\n</ul>\n<h3>Creating Development and Production Environments</h3>\n<ul>\n<li>Most applications need more than one configuartion</li>\n<li>\n<p>There should be two separate configurations for:</p>\n<ul>\n<li>Production</li>\n<li>Development</li>\n<li>Testing</li>\n</ul>\n</li>\n<li>We can do either of the following approach:</li>\n<li>Create separate config files</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">from</span> config <span class=\"token keyword\">import</span> PROD_SETTINGS\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">from</span> config <span class=\"token keyword\">import</span> TEST_SETTINGS\n\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> prod <span class=\"token operator\">=</span> Flask<span class=\"token punctuation\">(</span>__name__<span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> prod<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>from_object<span class=\"token punctuation\">(</span><span class=\"token string\">'PROD_SETTINGS'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> test <span class=\"token operator\">=</span> Flask<span class=\"token punctuation\">(</span>__name__<span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> test<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>from_object<span class=\"token punctuation\">(</span><span class=\"token string\">'TEST_SETTINGS'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<ol start=\"2\">\n<li>Create configuration classes</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Config</span><span class=\"token punctuation\">(</span><span class=\"token builtin\">object</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>     DEBUG <span class=\"token operator\">=</span> <span class=\"token boolean\">False</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>     TESTING <span class=\"token operator\">=</span> <span class=\"token boolean\">False</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>     DATABASE_URI <span class=\"token operator\">=</span> <span class=\"token string\">'sqlite:///:memory:'</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">ProdConfig</span><span class=\"token punctuation\">(</span>Config<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>     DATABASE_URI <span class=\"token operator\">=</span> <span class=\"token string\">'mysql://user@localhost/foo'</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">TestConfig</span><span class=\"token punctuation\">(</span>Config<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>     DEBUG <span class=\"token operator\">=</span> <span class=\"token boolean\">True</span>\n\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> prod<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>from_object<span class=\"token punctuation\">(</span><span class=\"token string\">'ProdConfig'</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> test<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span>from_object<span class=\"token punctuation\">(</span><span class=\"token string\">'TestConfig'</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3>References</h3>\n<ul>\n<li><a href=\"https://flask.palletsprojects.com/en/1.1.x/config/\" target=\"_blank\" rel=\"nofollow\">Details about Configuration Handling in Flask</a></li>\n</ul>"}},"pageContext":{"slug":"py/flask/config","previousSlug":"py/flask/log","nextSlug":"py/flask/signal","previousTitle":"Logging","nextTitle":"Signals"}},"staticQueryHashes":[]}