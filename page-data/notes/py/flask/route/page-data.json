{"componentChunkName":"component---src-templates-entry-js","path":"/notes/py/flask/route","result":{"data":{"markdownRemark":{"frontmatter":{"title":"URL Routing"},"html":"<h3>Describing URL Routing</h3>\n<ul>\n<li>Modern web applications use meaningful URLs to help users</li>\n<li>A server binds a socket to a listening web service</li>\n<li>The <code class=\"language-text\">route</code> decorator binds a function to a URL</li>\n<li>The following is an example:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> @app<span class=\"token punctuation\">.</span>route<span class=\"token punctuation\">(</span><span class=\"token string\">'/'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token keyword\">def</span> <span class=\"token function\">index</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>     <span class=\"token keyword\">return</span> <span class=\"token string\">'Index page'</span>\n\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> @app<span class=\"token punctuation\">.</span>route<span class=\"token punctuation\">(</span><span class=\"token string\">'/hello'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token keyword\">def</span> <span class=\"token function\">hello</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>     <span class=\"token keyword\">return</span> <span class=\"token string\">'Hello world'</span></code></pre></div>\n<ul>\n<li>We can also attach multiple rules to a function</li>\n<li>This makes part of the URL dynamic</li>\n<li>Specifically, these are called <em>variable rules</em></li>\n</ul>\n<h3>Describing Variable Rules</h3>\n<ul>\n<li>We can add variable sections to a URL by marking sections</li>\n<li>We can mark secions with <code class=\"language-text\">&lt;variable_name&gt;</code></li>\n<li>Then, a function receives the <code class=\"language-text\">&lt;variable_name&gt;</code> as a keyword argument</li>\n<li>The following is an example:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">from</span> markupsafe <span class=\"token keyword\">import</span> escape\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> @app<span class=\"token punctuation\">.</span>route<span class=\"token punctuation\">(</span><span class=\"token operator\">/</span>user<span class=\"token operator\">/</span><span class=\"token operator\">&lt;</span>username<span class=\"token operator\">></span>'<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token keyword\">def</span> <span class=\"token function\">show_user_profile</span><span class=\"token punctuation\">(</span>username<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>     <span class=\"token keyword\">return</span> <span class=\"token string\">'User %s'</span> <span class=\"token operator\">%</span> escape<span class=\"token punctuation\">(</span>username<span class=\"token punctuation\">)</span></code></pre></div>\n<h3>Describing Redirection Behavior</h3>\n<ul>\n<li>The following two rules differ in their behavior:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> @app<span class=\"token punctuation\">.</span>route<span class=\"token punctuation\">(</span><span class=\"token string\">'/projects/'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token keyword\">def</span> <span class=\"token function\">projects</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>     <span class=\"token keyword\">return</span> <span class=\"token string\">'The project page'</span>\n\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> @app<span class=\"token punctuation\">.</span>route<span class=\"token punctuation\">(</span><span class=\"token string\">'/about'</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token keyword\">def</span> <span class=\"token function\">about</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>     <span class=\"token keyword\">return</span> <span class=\"token string\">'The about page'</span></code></pre></div>\n<ul>\n<li>\n<p>If we access the <code class=\"language-text\">projects</code> URL:</p>\n<ul>\n<li>Flask successfully accepts <code class=\"language-text\">/projects/</code></li>\n<li>Flask redirects <code class=\"language-text\">/projects</code> to <code class=\"language-text\">/projects/</code></li>\n</ul>\n</li>\n<li>\n<p>If we access the <code class=\"language-text\">about</code> URL:</p>\n<ul>\n<li>Flask successfully accepts <code class=\"language-text\">/about</code></li>\n<li>Flask produces a <span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>404</mn></mrow><annotation encoding=\"application/x-tex\">404</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.64444em;vertical-align:0em;\"></span><span class=\"mord\">4</span><span class=\"mord\">0</span><span class=\"mord\">4</span></span></span></span> error for <code class=\"language-text\">/about/</code></li>\n</ul>\n</li>\n<li>This approach helps keep URLs unique</li>\n<li>This helps search engines avoid indexing the same page twice</li>\n</ul>\n<h3>Describing URL Building</h3>\n<ul>\n<li>The <code class=\"language-text\">url_for</code> function builds a URL to a specific function</li>\n<li>Its first argument is a function</li>\n<li>Typically, we'll prefer building URLs instead of hard-coding them</li>\n<li>\n<p>These are some reasons:</p>\n<ol>\n<li>The <code class=\"language-text\">url_for</code> function is more descriptive</li>\n<li>Related URLs can be captured by one <code class=\"language-text\">url_for</code> function</li>\n<li>Related URLs can be changed in one place</li>\n<li>URL building handles escaping special characters</li>\n<li>URL building handles unicode data well</li>\n<li>The generated paths are absolute</li>\n</ol>\n</li>\n</ul>\n<h3>Describing HTTP Methods</h3>\n<ul>\n<li>Web applications use different HTTP methods when accessing URLs</li>\n<li>A route only answers to <code class=\"language-text\">GET</code> requests by default</li>\n<li>We can specify additional HTTP methods using the <code class=\"language-text\">methods</code> argument</li>\n<li>The following provides an example of this:</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"python\"><pre class=\"language-python\"><code class=\"language-python\"><span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">from</span> flask <span class=\"token keyword\">import</span> request\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> @app<span class=\"token punctuation\">.</span>route<span class=\"token punctuation\">(</span><span class=\"token string\">'/login'</span><span class=\"token punctuation\">,</span> methods<span class=\"token operator\">=</span><span class=\"token punctuation\">[</span><span class=\"token string\">'GET'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'POST'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n<span class=\"token operator\">>></span><span class=\"token operator\">></span> <span class=\"token keyword\">def</span> <span class=\"token function\">login</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>     <span class=\"token keyword\">if</span> request<span class=\"token punctuation\">.</span>method <span class=\"token operator\">==</span> <span class=\"token string\">'POST'</span><span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>         <span class=\"token keyword\">return</span> do_the_login<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>     <span class=\"token keyword\">else</span><span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>         <span class=\"token keyword\">return</span> show_the_login_form<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<h3>References</h3>\n<ul>\n<li><a href=\"https://flask.palletsprojects.com/en/1.1.x/quickstart/#routing\" target=\"_blank\" rel=\"nofollow\">Defining URL Routing</a></li>\n<li><a href=\"https://stackoverflow.com/a/1047459/12777044\" target=\"_blank\" rel=\"nofollow\">What are Canonical URLs?</a></li>\n</ul>"}},"pageContext":{"slug":"py/flask/route","previousSlug":null,"nextSlug":"py/flask/template","previousTitle":null,"nextTitle":"Templates"}},"staticQueryHashes":[]}